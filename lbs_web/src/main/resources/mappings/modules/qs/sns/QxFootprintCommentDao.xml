<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.innovate.cms.modules.qs.dao.sns.QxFootprintCommentDao">
 	<insert id="saveComment" useGeneratedKeys="true" keyProperty="fcid" parameterType="com.innovate.cms.modules.qs.entity.sns.QxFootprintComment">
		INSERT INTO qx_footprint_comment (
			footid,
			uid,
			msg_type,
			from_comment_uid,
			from_comment_name,
			from_comment_img,
			to_comment_uid,
			to_comment_name,
			comment,
			create_time
		)
		VALUES
			(
				#{footid},
				#{uid},
				#{msgType},
				#{fromCommentUid},
				#{fromCommentName},
				#{fromCommentImg},
				#{toCommentUid},
				#{toCommentName},
				#{comment},
				#{createTime}
			);
	</insert>
	
	<select id="isCommentExist" resultType="int">
		SELECT
			COUNT(1)
		FROM
			qx_footprint_comment
		WHERE
			from_comment_uid = #{uid}
		AND fcid = #{fcid}
		AND del_flag = '0'
	</select>
	
	<update id="delCommentById">
		UPDATE qx_footprint_comment
		SET del_flag = '1'
		WHERE
			fcid = #{fcid}
	</update>
</mapper>